#
# Sway configuratioin
#

# Basic keybinds
set $mod1 Mod1
set $mod2 Mod4
floating_modifier $mod1
bindsym $mod1+Return exec kitty
bindsym $mod1+q kill
bindsym $mod1+Space exec ~/.config/sway/scripts/applauncher.sh
bindsym $mod1+Shift+c reload
bindsym $mod2+l exec ~/.config/sway/scripts/lock.sh
bindsym $mod1+y exec "~/.config/rofi/powermenu.sh sway"
bindsym $mod1+Shift+s exec ~/.config/sway/scripts/screenshot.sh
bindsym $mod1+o exec ~/.config/sway/scripts/sway-select.sh
bindsym $mod1+m exec "~/.config/sway/scripts/sway-marker.sh mark"
bindsym $mod1+g exec "~/.config/sway/scripts/sway-marker.sh go"
bindsym $mod1+c exec clipman pick -t wofi -T"-d -i -E -M fuzzy -s $HOME/.config/wofi/sway-select/style.css -p Clipbard"
bindsym $mod1+b exec "bash ~/.config/sway/scripts/bitwarden.sh"

# basic configuration
default_orientation vertical
workspace_layout tabbed
title_align center
for_window [title="Extension: .* Mozilla Firefox"] floating enable
for_window [shell="xwayland"] title_format "[XWayland] %title"
for_window [shell="(wayland)|(xdg_shell)"] title_format "%app_id %title"
default_border pixel 5
hide_edge_borders smart
mouse_warping output
focus_on_window_activation urgent
focus_wrapping force
focus_follows_mouse yes
font JetBrains Mono:bold 10

# focus switching
bindsym $mod1+j focus down
bindsym $mod1+k focus up
bindsym $mod1+l focus right
bindsym $mod1+h focus left
bindsym $mod1+Left focus left
bindsym $mod1+Down focus down
bindsym $mod1+Up focus up
bindsym $mod1+Right focus right
bindsym $mod1+a focus parent
bindsym $mod1+x focus child

# change layout
bindsym $mod1+Shift+n split h
bindsym $mod1+Shift+v split v
bindsym $mod1+f fullscreen toggle
bindsym $mod1+s layout stacking
bindsym $mod1+w layout tabbed
bindsym $mod1+e layout toggle split
# Note: both are correct as splitting horizontally splits on horizontal axis
bindsym $mod1+v layout splith
bindsym $mod1+n layout splitv
bindsym $mod1+Shift+t floating toggle

# move container
bindsym $mod1+Shift+j move down
bindsym $mod1+Shift+k move up
bindsym $mod1+Shift+l move right
bindsym $mod1+Shift+h move left
bindsym $mod1+Shift+Down move down
bindsym $mod1+Shift+Up move up
bindsym $mod1+Shift+Right move right
bindsym $mod1+Shift+Left move left

# workspaces
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# switch to workspace
bindsym $mod1+1 workspace $ws1
bindsym $mod1+2 workspace $ws2
bindsym $mod1+3 workspace $ws3
bindsym $mod1+4 workspace $ws4
bindsym $mod1+5 workspace $ws5
bindsym $mod1+6 workspace $ws6
bindsym $mod1+7 workspace $ws7
bindsym $mod1+8 workspace $ws8
bindsym $mod1+9 workspace $ws9
bindsym $mod1+0 workspace $ws10

# switch workspaces relative
bindsym $mod1+Control+l workspace next
bindsym $mod1+Control+h workspace prev
bindsym $mod1+d     workspace back_and_forth

# move focused container to workspace
bindsym $mod1+Shift+1 move container to workspace $ws1
bindsym $mod1+Shift+2 move container to workspace $ws2
bindsym $mod1+Shift+3 move container to workspace $ws3
bindsym $mod1+Shift+4 move container to workspace $ws4
bindsym $mod1+Shift+5 move container to workspace $ws5
bindsym $mod1+Shift+6 move container to workspace $ws6
bindsym $mod1+Shift+7 move container to workspace $ws7
bindsym $mod1+Shift+8 move container to workspace $ws8
bindsym $mod1+Shift+9 move container to workspace $ws9
bindsym $mod1+Shift+0 move container to workspace $ws10

# modes
include ~/.config/sway/modes/*.conf
bindsym $mod1+r mode "resize"
bindsym $mod1+Shift+x mode "jail"
bindsym $mod1+Escape mode "normal"

# Inputs
input type:keyboard {
  xkb_layout us,de
  xkb_options compose:caps
}

input type:pointer {
    accel_profile "flat"
    pointer_accel 0.1
}

input type:touchpad {
    dwt enabled
    tap enabled
    middle_emulation enabled
    natural_scroll enabled
}

# enviroment
exec nm-applet
exec --no-startup-id swayidle -w \
	timeout 1800 'swaylock -f' \
	timeout 1805 'swaymsg "output * power off"' \
		resume 'swaymsg "output * power on"'
exec wlsunset -T 6500 -t 2000 -S 6:30 -s 19:00
exec "/usr/libexec/polkit-gnome-authentication-agent-1"
exec dunst --startup_notification "Notification daemon started successfully" --config ~/.config/dunst/dunstrc
exec wl-paste -t text --watch clipman store --notify --no-persist
exec dbus-update-activation-environment WAYLAND_DISPLAY DISPLAY XDG_CURRENT_DESKTOP SWAYSOCK I3SOCK XCURSOR_SIZE XCURSOR_THEME
exec bash "$HOME/.config/sway/scripts/clamshell.sh"
exec_always --no-startup-id "$HOME/.config/waybar/launch.sh"
exec "bash $HOME/.config/sway/scripts/bitwarden.sh server"

# colors                border      background  text        indicator   child_border
client.focused          #4c7899     #285577     #ffffff     #2e9ef4     #285577
client.focused_inactive #333333     #5f676a     #ffffff     #484e50     #5f676a
client.unfocused        #333333     #222222     #888888     #292d2e     #222222
client.urgent           #2f343a     #900000     #ffffff     #900000     #900000
client.placeholder      #000000     #0c0c0c     #ffffff     #000000     #0c0c0c

# scratchpad
bindsym $mod1+Ctrl+minus move __i3_scratch
bindsym $mod1+minus scratchpad show

# screens
include ~/.config/sway/personalized.local/*.conf
